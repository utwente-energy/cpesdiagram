% Copyright 2025 University of Twente
%
% Licensed under the Apache License, Version 2.0 (the "License");
% you may not use this file except in compliance with the License.
% You may obtain a copy of the License at
%
%     http://www.apache.org/licenses/LICENSE-2.0
%
% Unless required by applicable law or agreed to in writing, software
% distributed under the License is distributed on an "AS IS" BASIS,
% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
% See the License for the specific language governing permissions and
% limitations under the License.

\input{cpesdiag/cpesdiag.tex}
\cpesstyle

% use the following style instead to have the diagram in grayscale
% \cpesstylegrey

% use the following style instead to have the diagram in light colours
% \cpesstylelight

\begin{tikzpicture} 
\matrix[row sep=2mm,column sep=5mm] {
 \\
% Defenition of the different nodes
 \node {Legend:}; \\
% Physical Grid Nodes
  \phynoded{p1}{}{mds_join}{mds_join}{label=above:\tiny{grid asset}}; &
  &
  \pnode{p2}{}; &
% A Device node
  \devicenoded{d1}{}{mds_electric_car}{mds_electric_car}{label=above:\tiny{device}}; &
  &
  \dnode{d2}{}; &
% A Control node
  \controlnoded{c1}{}{mds_memory}{mds_memory}{label=above:\tiny{controller}}; &
  &
  \cnode{c2}{}; &
  &
  \cnode{c3}{}; &
% A Interactive node
  \interactionnoded{i1}{}{mds_person}{mds_person}{label=above:\tiny{interaction}}; &
  &
  \inode{i2}{}; \\
};


% Definition of the different links

% Physical links
\draw [plink] (p1.east) -- (p2.west) node [above,align=center,midway, label=below:\tiny{cable}] {};

% Device links (streams)
\draw [<->, dlink] (d1.east) -- (d2.west) node [above,align=center,midway, label=below:\tiny{stream}] {};

% Control links
\draw [clink] (c1.east) -- (c2.west) node [above,align=center,midway, label=below:\tiny{2-way ICT}] {};
\draw [<-, clinku] (c2.east) -- (c3.west) node [above,align=center,midway, label=below:\tiny{1-way ICT}] {};

% Interaction links
\draw [<->, ilink] (i1.east) -- (i2.west) node [above,align=center,midway, label=below:\tiny{interaction}] {};

\end{tikzpicture}
